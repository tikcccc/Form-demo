export const projects = [
  { id: 'project-a', name: 'Project A' },
  { id: 'project-b', name: 'Project B' },
];

export const roles = [
  { id: 'contractor', label: 'Contractor', group: 'Contractor' },
  { id: 'mtr', label: 'MTR', group: 'MTR' },
  { id: 'scone', label: 'SConE', group: 'SConE' },
  { id: 'cm', label: 'CM', group: 'CM' },
];

export const types = [
  { id: 'rfi', name: 'RFI', templateIds: ['rfi-default'] },
  { id: 'cor', name: 'COR', templateIds: ['cor-default'] },
  { id: 'csf', name: 'CSF', templateIds: ['csf-default'] },
];

export const templates = [
  {
    id: 'rfi-default',
    typeId: 'rfi',
    name: 'Default',
    published: true,
    schema: [
      { key: 'title', label: 'Title', type: 'text', required: true, listColumn: true },
      { key: 'subject', label: 'Subject', type: 'text', required: true, listColumn: true },
      {
        key: 'discipline',
        label: 'Discipline',
        type: 'select',
        options: ['Structural', 'Architectural', 'MEP'],
        listColumn: true,
      },
      {
        key: 'priority',
        label: 'Priority',
        type: 'select',
        options: ['Low', 'Medium', 'High'],
        listColumn: true,
      },
      {
        key: 'impact',
        label: 'Impact',
        type: 'select',
        options: ['Yes', 'No'],
      },
      { key: 'costImpact', label: 'Cost Impact (USD)', type: 'number', min: 0 },
      { key: 'scheduleImpact', label: 'Schedule Impact (Days)', type: 'number', min: 0 },
      { key: 'question', label: 'Question', type: 'textarea', required: true, minLength: 10, maxLength: 240 },
    ],
    layout: {
      sections: [
        {
          id: 'rfi-basic',
          name: 'Request',
          fields: ['title', 'subject', 'discipline', 'priority'],
        },
        {
          id: 'rfi-question',
          name: 'Question',
          fields: ['question'],
        },
        {
          id: 'rfi-impact',
          name: 'Impact',
          fields: ['impact', 'costImpact', 'scheduleImpact'],
          visibleWhen: { field: 'impact', equals: 'Yes' },
        },
      ],
    },
    actions: [
      {
        id: 'rfi-send',
        label: 'Send',
        allowedRoles: ['contractor'],
        toCandidateGroups: ['MTR', 'SConE', 'CM'],
        dueDays: 3,
        lastStep: true,
        requiresAttachmentStatus: false,
        closeInstance: false,
      },
      {
        id: 'rfi-reply',
        label: 'Reply',
        allowedRoles: ['mtr', 'scone', 'cm'],
        toCandidateGroups: ['Contractor'],
        dueDays: 2,
        lastStep: false,
        requiresAttachmentStatus: false,
        closeInstance: true,
      },
    ],
  },
  {
    id: 'cor-default',
    typeId: 'cor',
    name: 'Default',
    published: true,
    schema: [
      { key: 'title', label: 'Title', type: 'text', required: true, listColumn: true },
      {
        key: 'reason',
        label: 'Change Reason',
        type: 'select',
        options: ['Client Request', 'Design Update', 'Site Condition'],
        listColumn: true,
      },
      { key: 'costDelta', label: 'Cost Delta (USD)', type: 'number', listColumn: true, min: 0 },
      { key: 'timeDelta', label: 'Time Delta (Days)', type: 'number', listColumn: true, min: 0 },
      { key: 'description', label: 'Description', type: 'textarea', required: true, minLength: 8 },
    ],
    layout: {
      sections: [
        {
          id: 'cor-basic',
          name: 'Change Summary',
          fields: ['title', 'reason', 'costDelta', 'timeDelta'],
        },
        {
          id: 'cor-desc',
          name: 'Description',
          fields: ['description'],
        },
      ],
    },
    actions: [
      {
        id: 'cor-submit',
        label: 'Submit',
        allowedRoles: ['contractor'],
        toCandidateGroups: ['CM', 'MTR'],
        dueDays: 5,
        lastStep: true,
        requiresAttachmentStatus: false,
        closeInstance: false,
      },
      {
        id: 'cor-final',
        label: 'Reply (Final)',
        allowedRoles: ['cm', 'mtr'],
        toCandidateGroups: ['Contractor'],
        dueDays: 2,
        lastStep: false,
        requiresAttachmentStatus: false,
        closeInstance: true,
      },
    ],
  },
  {
    id: 'csf-default',
    typeId: 'csf',
    name: 'Default',
    published: true,
    schema: [
      { key: 'title', label: 'Title', type: 'text', required: true, listColumn: true },
      {
        key: 'specSection',
        label: 'Spec Section',
        type: 'text',
        required: true,
        listColumn: true,
        minLength: 3,
        maxLength: 12,
      },
      {
        key: 'package',
        label: 'Package',
        type: 'select',
        options: ['Concrete', 'Steel', 'Facade', 'MEP'],
        listColumn: true,
      },
      { key: 'description', label: 'Description', type: 'textarea' },
    ],
    layout: {
      sections: [
        {
          id: 'csf-basic',
          name: 'Submittal',
          fields: ['title', 'specSection', 'package', 'description'],
        },
      ],
    },
    actions: [
      {
        id: 'csf-submit',
        label: 'Submit',
        allowedRoles: ['contractor'],
        toCandidateGroups: ['MTR', 'CM'],
        dueDays: 4,
        lastStep: true,
        requiresAttachmentStatus: false,
        closeInstance: false,
      },
      {
        id: 'csf-approved',
        label: 'Approved',
        allowedRoles: ['mtr', 'cm'],
        toCandidateGroups: ['Contractor'],
        dueDays: 2,
        lastStep: false,
        requiresAttachmentStatus: true,
        closeInstance: true,
        statusSet: ['Approved', 'For Info'],
      },
      {
        id: 'csf-aip',
        label: 'AIP',
        allowedRoles: ['mtr', 'cm'],
        toCandidateGroups: ['Contractor'],
        dueDays: 2,
        lastStep: true,
        requiresAttachmentStatus: true,
        closeInstance: false,
        statusSet: ['AIP', 'Rejected'],
      },
      {
        id: 'csf-not-approved',
        label: 'Not Approved',
        allowedRoles: ['mtr', 'cm'],
        toCandidateGroups: ['Contractor'],
        dueDays: 2,
        lastStep: true,
        requiresAttachmentStatus: true,
        closeInstance: false,
        statusSet: ['Rejected'],
      },
    ],
  },
];

export const instances = [
  {
    id: 'inst-001',
    transmittalNo: 'RFI-2024-0001',
    typeId: 'rfi',
    templateId: 'rfi-default',
    title: 'Clarify beam connection',
    status: 'Open',
    createdBy: 'contractor',
    createdAt: '2024-10-02',
    formData: {
      title: 'Clarify beam connection',
      subject: 'Beam B2 detail',
      discipline: 'Structural',
      priority: 'High',
      impact: 'Yes',
      costImpact: 12000,
      scheduleImpact: 3,
      question: 'Confirm plate thickness for B2 connection detail.',
    },
    attachments: [
      {
        id: 'att-001',
        name: 'RFI-B2-Sketch.pdf',
        type: 'PDF',
        revision: 'A',
        remark: 'Markup sketch',
        status: '',
      },
    ],
    steps: [
      {
        id: 'step-001',
        actionId: 'rfi-send',
        actionLabel: 'Send',
        fromRoleId: 'contractor',
        toGroup: 'MTR',
        sentAt: '2024-10-02',
        openedAt: '',
        dueDate: '2024-10-05',
        lastStep: true,
        requiresAttachmentStatus: false,
        message: 'Please review and respond.',
      },
    ],
  },
  {
    id: 'inst-002',
    transmittalNo: 'CSF-2024-0004',
    typeId: 'csf',
    templateId: 'csf-default',
    title: 'Facade anchor system',
    status: 'Open',
    createdBy: 'contractor',
    createdAt: '2024-10-05',
    formData: {
      title: 'Facade anchor system',
      specSection: '07 24 00',
      package: 'Facade',
      description: 'Anchor assembly submittal for review.',
    },
    attachments: [
      {
        id: 'att-002',
        name: 'Anchor-Detail.pdf',
        type: 'PDF',
        revision: 'B',
        remark: 'Shop drawing',
        status: '',
      },
      {
        id: 'att-003',
        name: 'Anchor-Calc.xlsx',
        type: 'XLSX',
        revision: 'A',
        remark: 'Design calculations',
        status: '',
      },
    ],
    steps: [
      {
        id: 'step-002',
        actionId: 'csf-submit',
        actionLabel: 'Submit',
        fromRoleId: 'contractor',
        toGroup: 'MTR',
        sentAt: '2024-10-05',
        openedAt: '',
        dueDate: '2024-10-09',
        lastStep: true,
        requiresAttachmentStatus: false,
        message: 'Please review for approval.',
      },
    ],
  },
  {
    id: 'inst-003',
    transmittalNo: 'COR-2024-0007',
    typeId: 'cor',
    templateId: 'cor-default',
    title: 'Slab pour sequence change',
    status: 'Closed',
    createdBy: 'contractor',
    createdAt: '2024-09-20',
    formData: {
      title: 'Slab pour sequence change',
      reason: 'Site Condition',
      costDelta: 35000,
      timeDelta: 5,
      description: 'Adjust pour sequence due to access constraints.',
    },
    attachments: [
      {
        id: 'att-004',
        name: 'COR-Sequence.pdf',
        type: 'PDF',
        revision: 'C',
        remark: 'Updated sequence plan',
        status: 'Approved',
      },
    ],
    steps: [
      {
        id: 'step-003',
        actionId: 'cor-submit',
        actionLabel: 'Submit',
        fromRoleId: 'contractor',
        toGroup: 'CM',
        sentAt: '2024-09-20',
        openedAt: '2024-09-21',
        dueDate: '2024-09-25',
        lastStep: true,
        requiresAttachmentStatus: false,
        message: 'Request approval for revised sequence.',
      },
      {
        id: 'step-004',
        actionId: 'cor-final',
        actionLabel: 'Reply (Final)',
        fromRoleId: 'cm',
        toGroup: 'Contractor',
        sentAt: '2024-09-23',
        openedAt: '2024-09-23',
        dueDate: '2024-09-25',
        lastStep: false,
        requiresAttachmentStatus: false,
        message: 'Approved with no additional cost.',
      },
    ],
  },
];

export const initialState = {
  projects,
  roles,
  types,
  templates,
  instances,
  currentProjectId: 'project-a',
  currentRoleId: 'contractor',
};
